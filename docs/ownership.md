# ownership (ì†Œìœ ê¶Œ)


## ë©”ëª¨ë¦¬ ê´€ë¦¬
ë©”ëª¨ë¦¬ë¼ëŠ” ìì›ì€ í•œì •ë˜ì–´ ìˆê¸° ë•Œë¬¸ì— í”„ë¡œê·¸ë˜ë° ì–¸ì–´ë“¤ì€ ê°ìì˜ ë°©ì‹ìœ¼ë¡œ ì´ ë©”ëª¨ë¦¬ë¥¼ íš¨ìœ¨ì ìœ¼ë¡œ ê´€ë¦¬

### ë©”ëª¨ë¦¬ êµ¬ì¡°(ìŠ¤íƒê³¼ í™)
- ìŠ¤íƒ: ìŠ¤íƒ ì˜ì—­ì€ í•¨ìˆ˜ê°€ ì‹¤í–‰ë  ë•Œ ì‚¬ìš©í•˜ëŠ” ë©”ëª¨ë¦¬ ê³µê°„ìœ¼ë¡œ, í•¨ìˆ˜ì—ì„œ ì‚¬ìš©í•˜ëŠ” ì§€ì—­ ë³€ìˆ˜ê°€ ìŠ¤íƒì— ì €ì¥ë©ë‹ˆë‹¤. ì¼ë°˜ì ìœ¼ë¡œ ìŠ¤íƒì—ì„œ ì‚¬ìš©ë  ë©”ëª¨ë¦¬ ê³µê°„ì´ ë¯¸ë¦¬ ì •í•´ì§€ê¸° ë•Œë¬¸ì— ë§¤ìš° ë¹ ë¥´ê²Œ ê°’ì„ ì €ì¥í•˜ê³  ì ‘ê·¼í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤. ë§Œì¼ í•¨ìˆ˜ ì‹¤í–‰ì´ ì¢…ë£Œë˜ë©´ ìŠ¤íƒ ì˜ì—­ì—ì„œ ì‚¬ìš©ëœ ëª¨ë“  ì§€ì—­ ë³€ìˆ˜ëŠ” ë©”ëª¨ë¦¬ì—ì„œ ì‚­ì œë©ë‹ˆë‹¤. 
- í™: í™ ì˜ì—­ì€ ë™ì ìœ¼ë¡œ í• ë‹¹ë˜ëŠ” ë©”ëª¨ë¦¬ë¥¼ ìœ„í•´ ì¡´ì¬í•˜ëŠ” ê³µê°„ìœ¼ë¡œ, ê°œë°œìê°€ ëª…ì‹œì ìœ¼ë¡œ íŠ¹ì • í¬ê¸°ì˜ ë©”ëª¨ë¦¬ ê³µê°„ì„ ì‚¬ìš©í•˜ê² ë‹¤ê³  ì„ ì–¸í•´ì•¼ í•©ë‹ˆë‹¤. ë§Œì¼ í•´ë‹¹ ë©”ëª¨ë¦¬ ê³µê°„ì´ ë” ì´ìƒ í•„ìš”í•˜ì§€ ì•Šì€ ê²½ìš°ì—ëŠ” í•´ë‹¹ ë©”ëª¨ë¦¬ë¥¼ í• ë‹¹ í•´ì œí•´ì£¼ì–´ì•¼ í•©ë‹ˆë‹¤. ì™œëƒí•˜ë©´ ì´ë¯¸ ì ìœ ëœ ë©”ëª¨ë¦¬ ê³µê°„ì€ ë‹¤ë¥¸ í”„ë¡œê·¸ë¨ì´ë‚˜ ìŠ¤ë ˆë“œì—ì„œ ì‚¬ìš©í•  ìˆ˜ ì—†ê¸° ë•Œë¬¸ì…ë‹ˆë‹¤.



### Python
**`ê°€ë¹„ì§€ ì½œë ‰í„°`ë¥¼ ì´ìš©í•´ ì–¸ì–´ ì°¨ì›ì—ì„œ ìë™ìœ¼ë¡œ ë©”ëª¨ë¦¬ë¥¼ ê´€ë¦¬.**
Pythonì€ ëª¨ë“  ê°ì²´ì˜ ë°ì´í„°ë¥¼ í™ ì˜ì—­ì— ì €ì¥.

**íŒŒì´ì¬ì€ ìŠ¤íƒì„ ì‚¬ìš©í•˜ì§€ ì•Šê³  ëª¨ë“  ê°ì²´ë¥¼ í™ ì˜ì—­ì— ì €ì¥**. ì´ë ‡ê²Œ ì €ì¥ëœ ê°ì²´ë“¤ì€ íŒŒì´ì¬ì—ì„œ ê°€ë¹„ì§€ ì½œë ‰ì…˜ì„ í†µí•´ ë©”ëª¨ë¦¬ë¥¼ ê´€ë¦¬í•˜ê¸° ë•Œë¬¸ì— íŒŒì´ì¬ì„ ì‚¬ìš©í•  ë•ŒëŠ” ë©”ëª¨ë¦¬ ê´€ë¦¬ì— ì‹ ê²½ì“°ì§€ ì•Šì•„ë„ ë©ë‹ˆë‹¤. ìœ„ì—ì„œ í™ ì˜ì—­ì— ëŒ€í•´ì„œ ì„¤ëª…í•  ë•Œ ì–¸ê¸‰í•œ ê°œë°œìê°€ **í• ë‹¹í•˜ê³  í• ë‹¹ í•´ì œí•˜ëŠ” ë©”ëª¨ë¦¬ë¥¼ íŒŒì´ì¬ì˜ ê°€ë¹„ì§€ ì½œë ‰í„°ê°€ ëŒ€ì‹ **í•´ì£¼ëŠ” ê²ƒì…ë‹ˆë‹¤.


ì´ ê°€ë¹„ì§€ ì»¬ë ‰í„°ê°€ ëŸ°íƒ€ì„ì— ì‚¬ìš©ë˜ì§€ ì•ŠëŠ” ê°ì²´ê°€ ìˆìœ¼ë©´ ì£¼ê¸°ì ìœ¼ë¡œ ê°ì²´ë¥¼ ì‚­ì œ
ë˜ëŠ” ë©”ëª¨ë¦¬ ì‚¬ìš©ëŸ‰ì´ ë„ˆë¬´ ë†’ì€ ê²½ìš°ì—ë„ ì‚­ì œ.

> ë“œë””ì–´ 'ê°€ë¹„ì§€ ì»¬ë ‰í„°' ë¼ëŠ” ìš©ì–´ê°€ ë‚˜ì™”ë‹¤. 
> docs/Intro_why_rust.md ì˜ <CPU ì—°ì‚°ì´ ë§ì´ í•„ìš”í•œ ì½”ë“œë¥¼ ëŸ¬ìŠ¤íŠ¸ë¡œ êµì²´í•˜ë©´ ë¹ ë¥´ê²Œ ë™ì‘í•˜ëŠ” í”„ë¡œê·¸ë¨ì„ ë§Œë“¤ ìˆ˜ ìˆìŠµë‹ˆë‹¤.> ì—ì„œ  ëŸ¬ìŠ¤íŠ¸ì™€ ìì£¼ ë¹„êµë˜ëŠ” ì–¸ì–´ì¸ ê³ (Go)ì™€ ë‹¤ë¥´ê²Œ, ëŸ¬ìŠ¤íŠ¸ì—ëŠ” ì†Œìœ ê¶Œ(ownership) ëª¨ë¸ì„ ì‚¬ìš©í•´ì„œ  ê°€ë¹„ì§€ ì½œë ‰í„°ê°€ ì—†ê¸° ë•Œë¬¸ì— í›¨ì”¬ ì¢‹ì€ ì„±ëŠ¥ì„ ë‚´ê²Œ ë©ë‹ˆë‹¤. ì´ëŸ¬í•œ íŠ¹ì§• ë•Œë¬¸ì— í¼í¬ë¨¼ìŠ¤ê°€ ë§¤ìš° ì¤‘ìš”í•œ ì„œë¹„ìŠ¤ì— ìì£¼ ì‚¬ìš©ë©ë‹ˆë‹¤.
> ë¼ëŠ” ë§ì— ëŒ€í•´ì„œ ì´ì œì•¼ ì´í•´í•  ì¤€ë¹„ê°€ ë˜ì—ˆë‹¤. 

ìœ„ 'ëŸ¬ìŠ¤íŠ¸ì—ëŠ” ì†Œìœ ê¶Œ(ownership) ëª¨ë¸ì„ ì‚¬ìš©í•´ì„œ  ê°€ë¹„ì§€ ì½œë ‰í„°ê°€ ì—†ê¸° ë•Œë¬¸ì— í›¨ì”¬ ì¢‹ì€ ì„±ëŠ¥ì„ ë‚´ê²Œ ë©ë‹ˆë‹¤.' ë¼ëŠ” ë§ì„ ê±°ê¾¸ë¡œ í•˜ë©´ Pythonì—ì„œëŠ” ê°€ë¹„ì§€ ì»¬ë ‰í„°ê°€ ë©”ëª¨ë¦¬ë¥¼ ê´€ë¦¬í•˜ê¸° ë•Œë¬¸ì— ì„±ëŠ¥ì´ ë–¨ì–´ì§„ë‹¤.(ëŠë¦¬ë‹¤.) ê°€ ëœë‹¤. 
ê°€ë¹„ì§€ ì»¬ë ‰í„°ê°€ ë¬´ìŠ¨ ì˜í–¥ì„ ì£¼ê¸¸ë˜ ëŠë ¤ì§€ëŠ” ê±¸ê¹Œ? 
ì´ìœ ëŠ” 
1. ê°€ë¹„ì§€ ì½œë ‰ì…˜ì´ ìˆ˜í–‰ë˜ëŠ” ë™ì•ˆì—ëŠ” ë‹¤ë¥¸ íŒŒì´ì¬ ì½”ë“œê°€ ì‹¤í–‰ë  ìˆ˜ ì—†ê¸° ë•Œë¬¸ì— íŒŒì´ì¬ì˜ ì½”ë“œ ì‹¤í–‰ ì†ë„ê°€ ëŠë ¤ì§€ëŠ” ì›ì¸ì´ ë©ë‹ˆë‹¤. 
2. ì–´ë–¤ ê°ì²´ê°€ ì–¸ì œ ë©”ëª¨ë¦¬ì—ì„œ í• ë‹¹ í•´ì œë˜ëŠ”ì§€ë¥¼ ê°œë°œìê°€ ëª…ì‹œì ìœ¼ë¡œ ì•Œ ìˆ˜ ìˆëŠ” ë°©ë²•ì´ ì—†ê³  ê°€ë¹„ì§€ ì½œë ‰í„°ê°€ ì´ë¥¼ ì „ë‹´í•˜ê¸° ë•Œë¬¸ì— í”„ë¡œê·¸ë¨ì´ ë¶ˆí•„ìš”í•˜ê²Œ ë§ì€ ë©”ëª¨ë¦¬ë¥¼ ì‚¬ìš©í•  ê°€ëŠ¥ì„±ë„ ìˆìŠµë‹ˆë‹¤.

### Rust
**`ì†Œìœ ê¶Œ(Ownership)`ì´ë¼ëŠ” ê°œë…ì„ í†µí•´ ë©”ëª¨ë¦¬ë¥¼ ê´€ë¦¬** ëŸ¬ìŠ¤íŠ¸ì—ì„œëŠ” ì–´ë–¤ ê°’ì´ ë”ì´ìƒ ì‚¬ìš©ë˜ì§€ ì•ŠëŠ”ì§€ë¥¼ ì†Œìœ ê¶Œì„ ì‚¬ìš©í•´ íŒë‹¨í•©ë‹ˆë‹¤. ëª¨ë“  ê°’ì— ì†Œìœ ìë¥¼ ì§€ì •í•˜ê³ , ì´ ê°’ì„ ì†Œìœ í•˜ê³  ìˆëŠ” ì†Œìœ ìê°€ ì—†ê²Œ ë˜ë©´ ì¦‰ì‹œ ê°’ì´ ë©”ëª¨ë¦¬ì—ì„œ í• ë‹¹ í•´ì œë˜ëŠ” ì›ë¦¬

**ëŸ¬ìŠ¤íŠ¸ëŠ” ìŠ¤íƒ ì˜ì—­ê³¼ í™ ì˜ì—­ ëª¨ë‘ë¥¼ ì‚¬ìš©**í•©ë‹ˆë‹¤. ëŸ¬ìŠ¤íŠ¸ëŠ” ê¸°ë³¸ì ìœ¼ë¡œ ì•„ë˜ì™€ ê°™ì´ **í•¨ìˆ˜ì—ì„œ ì‚¬ìš©í•˜ëŠ” ëª¨ë“  ê°’ì„ ì œí•œëœ í¬ê¸°ì˜ ìŠ¤íƒ ì˜ì—­ì— ì €ì¥**í•©ë‹ˆë‹¤. ë”°ë¼ì„œ í•¨ìˆ˜ í˜¸ì¶œì´ ì¢…ë£Œë˜ë©´ ì§€ì—­ ë³€ìˆ˜ foo ì™€ varëŠ” ëª¨ë‘ ì‚­ì œë©ë‹ˆë‹¤.
```rust
fn foo() {
    let foo = "foo";
    let var = 5;
}
```
**í™ ì˜ì—­ì€ í•¨ìˆ˜ì—ì„œ ëª…ì‹œì ìœ¼ë¡œ ì„ ì–¸í•˜ëŠ” ê²½ìš°ì—ë§Œ ì‚¬ìš©**ë˜ëŠ”ë°, í™ ì˜ì—­ì— ì €ì¥í•˜ëŠ” ê°’ì€ ì „ì—­ì ìœ¼ë¡œ(globally) ì ‘ê·¼ì´ ê°€ëŠ¥í•©ë‹ˆë‹¤. ë‚˜ì¤‘ì— ë°°ìš¸ Box íƒ€ì…ì„ ì‚¬ìš©í•´ ì„ ì–¸í•˜ë©´ ë©ë‹ˆë‹¤. ê·¸ë¦¬ê³  **ë©€í‹°ìŠ¤ë ˆë”©ì—ì„œ ì—¬ëŸ¬ ìŠ¤ë ˆë“œê°€ ì ‘ê·¼í•˜ëŠ” ë³€ìˆ˜ì˜ ê°’ì€ í™ ì˜ì—­ì— ì €ì¥**ë˜ê²Œ ë©ë‹ˆë‹¤.

```rust
fn main() {
    let num = Box::new(1);
}
```

> ê°€ë¹„ì§€ ì»¬ë ‰í„° ì¸¡ë©´ ë¿ë§Œ ì•„ë‹ˆë¼ ì†Œìœ ê¶Œ ê°œë…ì´ ì£¼ëŠ” ì¥ì 
> - ë©”ëª¨ë¦¬ ì•ˆì „ì„±: ë©”ëª¨ë¦¬ ì•ˆì „ì„±ì´ë€, í•˜ë‚˜ì˜ ê°’ì— ëŒ€í•´ì„œ ë‹¨ í•˜ë‚˜ì˜ ì½”ë“œë§Œ ì ‘ê·¼í•˜ê¸° ë•Œë¬¸ì— ì˜ˆìƒì¹˜ ëª»í•˜ê²Œ ê°’ì´ ë³€ê²½ë˜ëŠ” ì¼ì´ ì—†ë‹¤ëŠ” ì˜ë¯¸
> - ìŠ¤ë ˆë“œ ì•ˆì „ì„±ì´ ë³´ì¥:  ì—¬ëŸ¬ ê°œì˜ ìŠ¤ë ˆë“œì—ì„œ í•˜ë‚˜ì˜ ê°’ì— ì ‘ê·¼í•˜ê³ ì í•  ë•Œ ë°œìƒí•  ìˆ˜ ìˆëŠ” ê²½í•© ì¡°ê±´(Race condition)ì´ë‚˜ ë°ë“œë½(Deadlock)ì´ ë°œìƒí•˜ì§€ ì•ŠëŠ”ë‹¤ëŠ” ì˜ë¯¸ì…ë‹ˆë‹¤. ì´ ë‘ ê°€ì§€ ë¬¸ì œê°€ ë©€í‹°ìŠ¤ë ˆë”© í”„ë¡œê·¸ë¨ì„ ë§Œë“¤ ë•Œ ê°€ì¥ ì–´ë µê³  ë³µì¡í•œ ë¬¸ì œì´ì§€ë§Œ ëŸ¬ìŠ¤íŠ¸ì—ì„œëŠ” ì´ë¥¼ ì»´íŒŒì¼ íƒ€ì„ì— íƒì§€í•  ìˆ˜ ìˆê¸° ë•Œë¬¸ì— ì•ˆì •ì„±ì´ ë³´ì¥ë©ë‹ˆë‹¤.





## ownership ì†Œìœ ê¶Œ ê·œì¹™
- ëª¨ë“  "ê°’"ë“¤ì€ í•´ë‹¹ ê°’ì„ "ì†Œìœ "í•˜ê³  ìˆëŠ” ì†Œìœ ì(Owner)ê°€ ì¡´ì¬í•©ë‹ˆë‹¤.
- í•œ ê°’ì— í•˜ë‚˜ì˜ ì†Œìœ ìë§Œ ì¡´ì¬í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤. í•˜ë‚˜ì˜ ê°’ì— ë‘ ê°œì˜ ì†Œìœ ìê°€ ë™ì‹œì— ì¡´ì¬í•  ìˆ˜ ì—†ìŠµë‹ˆë‹¤.
- ì†Œìœ ìê°€ í˜„ì¬ ì½”ë“œì˜ ìŠ¤ì½”í”„(./variable.md ì˜ Scopeì—ì„œ rust ì˜ scopeëŠ” {} ë¼ê³  í–ˆìŒ. )ì—ì„œ ë²—ì–´ë‚˜ë©´, ê°’ì€ ë©”ëª¨ë¦¬ì—ì„œ í• ë‹¹ í•´ì œë©ë‹ˆë‹¤.
```rust
fn dummy(x: String) {
    println!("{}", x);
  	// x is dropped
}

fn main() {
    let x = String::from("Hello");
    dummy(x);
    println!("{}", x);  // This line won't compile
}
```
í•¨ìˆ˜ dummy ì— ë¬¸ìì—´ì´ ì „ë‹¬ëœ ë‹¤ìŒ, í•¨ìˆ˜ë¥¼ ë²—ì–´ë‚˜ë©´ ê·¸ ì¦‰ì‹œ x ëŠ” í• ë‹¹ í•´ì œë©ë‹ˆë‹¤. ê·¸ëŸ°ë° ì´ë¯¸ í• ë‹¹ í•´ì œëœ xë¥¼ 9ë²ˆ ë¼ì¸ì—ì„œ ì°¸ì¡°í•˜ê³  ìˆê¸° ë•Œë¬¸ì— ì˜¤ë¥˜ê°€ ë°œìƒí•©ë‹ˆë‹¤. ê·¸ëŸ¬ë©´ ëª¨ë“  ê°’ì€ ë‹¤ë¥¸ í•¨ìˆ˜ì— ì „ë‹¬í•˜ë©´ ì˜ì›íˆ ì‚¬ìš©í•˜ì§€ ëª»í•˜ëŠ” ê±¸ê¹Œìš”? ì´ëŸ° ê²½ìš° ì‚¬ìš©í•  ìˆ˜ ìˆëŠ” ë‘ ê°€ì§€ ë°©ë²•ì´ ìˆìŠµë‹ˆë‹¤.

## ì†Œìœ ê¶Œ ëŒë ¤ì£¼ê¸°
ìœ„ì˜ ì˜ˆì œì²˜ëŸ¼ í•¨ìˆ˜ parameterì— ì „ë‹¬í•¨ìœ¼ë¡œì¨ ì†Œìœ ê¶Œì´ ë„˜ì–´ê°„ ì´í›„, ì‚¬ìš©í•˜ê³  ë‚˜ì„œ ë‹¤ì‹œ ì†Œìœ ê¶Œì„ í˜¸ì¶œí–ˆë˜ ê³³ìœ¼ë¡œ ëŒë ¤ì£¼ëŠ” ë°©ë²•
1. ë¦¬í„´í•´ì£¼ê¸°.
```rust
fn dummy(x: String) -> String {
    println!("{}", x);
    x
}

fn main() {
    let x = String::from("Hello");
    let x = dummy(x);
    println!("{}", x);
}
```
í•˜ì§€ë§Œ ì´ ë°©ë²•ì€ ë§¤ë²ˆ í•¨ìˆ˜ì˜ ë¦¬í„´ê°’ì„ ë³€ìˆ˜ë¡œ ì¬ì„ ì–¸í•´ì£¼ì–´ì•¼ í•˜ê¸° ë•Œë¬¸ì— ì½”ë“œì˜ ê°€ë…ì„±ì´ ë–¨ì–´ì§€ê³ , ê°’ì´ ì–´ëŠ ë³€ìˆ˜ë¡œ ì´ë™í•˜ëŠ”ì§€ë¥¼ ì•Œê¸° ì–´ë ¤ìš´ ë‹¨ì ì´ ìˆìŠµë‹ˆë‹¤.

2. ë ˆí¼ëŸ°ìŠ¤ì™€ ì†Œìœ ê¶Œ ë¹Œë¦¬ê¸°  
ëŸ¬ìŠ¤íŠ¸ì—ëŠ” ê°’ì˜ ì†Œìœ ê¶Œì„ ì ì‹œ ë¹Œë ¤ì¤„ ìˆ˜ ìˆëŠ” ê°œë…ì¸ `ëŒ€ì—¬(borrow)`ê°€ ìˆìŒ.   
ë³€ìˆ˜ ì•ì— `&` í‚¤ì›Œë“œë¥¼ ì‚¬ìš©í•˜ë©´ ë˜ëŠ”ë°, í•´ë‹¹ ë³€ìˆ˜ì˜ ë ˆí¼ëŸ°ìŠ¤(reference)ë¥¼ ì„ ì–¸í•œë‹¤ëŠ” ì˜ë¯¸ì…ë‹ˆë‹¤. ë ˆí¼ëŸ°ìŠ¤ë€ ì†Œìœ ê¶Œì„ ê°€ì ¸ê°€ì§€ ì•Šê³  í•´ë‹¹ ê°’ì„ ì°¸ì¡°í•  ìˆ˜ ìˆëŠ” ë°©ë²•ì…ë‹ˆë‹¤. 

```rust
fn main() {
    let x = String::from("Hello");
    let y = &x; // &ë¥¼ ì‚¬ìš©í•´ì„œ í• ë‹¹í–ˆê¸° ë•Œë¬¸ì— "Hello"ì˜ ê°’ì˜ ì†Œìœ ê¶Œì€ ì—¬ì „íˆ xì— ìˆê³ , yëŠ” ë‹¨ìˆœíˆ ê°’ì„ ì°¸ì¡°ë§Œ í•©ë‹ˆë‹¤. ë”°ë¼ì„œ ë§ˆì§€ë§‰ì—ì„œ ë³€ìˆ˜ xì™€ yë¥¼ ëª¨ë‘ í”„ë¦°íŠ¸í•´ë„ ì—ëŸ¬ê°€ ë°œìƒí•˜ì§€ ì•ŠìŠµë‹ˆë‹¤.

    println!("{} {}", x, y);
}
```
ì´ ë•Œ yì˜ íƒ€ì…ì€ `&String` ìœ¼ë¡œ ë¬¸ìì—´ì˜ ë ˆí¼ëŸ°ìŠ¤ íƒ€ì…ì„. 

## ê°€ë³€ ë ˆí¼ëŸ°ìŠ¤
ì†Œìœ ê¶Œì„ ë¹Œë ¤ì˜¨ í›„(ë ˆí¼ëŸ°ìŠ¤), ê°’ì„ ë³€ê²½í•˜ê³  ì‹¶ë‹¤ë©´ `ê°€ë³€ ë ˆí¼ëŸ°ìŠ¤`ë¡œ ë¹Œë ¤ì˜¤ë©´ ëœë‹¤. 
1. dummyí•¨ìˆ˜ì˜ íŒŒë¼ë¯¸í„° y ì˜ íƒ€ì…ì´ &mut String ìœ¼ë¡œ ë³€ê²½
2. ë³€ìˆ˜ xë¥¼ ê°€ë³€ ë³€ìˆ˜ë¡œ ì„ ì–¸
3. dummyí•¨ìˆ˜ì— xë¥¼ ì „ë‹¬í•  ë•Œ ê°€ë³€ ë ˆí¼ëŸ°ìŠ¤ &mut xë¡œ ì „ë‹¬
```rust
fn dummy(y: &mut String) {
    y.push_str(" world!");
    println!("{}", y);
    // ownership returns to `x`
}

fn main() {
    let mut x = String::from("Hello");
    dummy(&mut x);
    println!("{}", x);
}

// ì‹¤í–‰ ê²°ê³¼
// Hello world!
// Hello world!
```

## ë‹¤ìˆ˜ì˜ ê°€ë³€ ë ˆí¼ëŸ°ìŠ¤ ë¶ˆê°€
ë³€ìˆ˜ xì˜ ì†Œìœ ê¶Œì„ í•œ ë²ˆ ì´ìƒ ëŒ€ì—¬í•  ìˆ˜ ì—†ë‹¤ê³  í•©ë‹ˆë‹¤. ë§Œì¼ í•˜ë‚˜ì˜ ì†Œìœ ê¶Œì„ ì—¬ëŸ¬ ê°œì˜ ë³€ìˆ˜ê°€ ë¹Œë¦´ ìˆ˜ ìˆë‹¤ë©´ í° ë¬¸ì œê°€ ë°œìƒí•  ê°€ëŠ¥ì„±ì´ ìˆìŠµë‹ˆë‹¤. 
í•˜ë‚˜ì˜ ë©”ëª¨ë¦¬ë¥¼ ì—¬ëŸ¬ ê³³ì—ì„œ ì ‘ê·¼í•  ìˆ˜ ìˆê¸° ë•Œë¬¸ì— ë²„ê·¸ê°€ ë°œìƒí•  ìˆ˜ ìˆìŠµë‹ˆë‹¤. ì˜ˆë¥¼ ë“¤ì–´ ì–´ë–¤ ê°€ë³€ ë ˆí¼ëŸ°ìŠ¤ì—ì„œ ê°’ì„ ë³€ê²½í–ˆëŠ”ë°, ë‹¤ë¥¸ ê³³ì—ì„œëŠ” ë³€ê²½ ì „ì˜ ê°’ì„ í•„ìš”ë¡œ í•œë‹¤ë©´ ì˜ˆìƒì¹˜ ëª»í•œ ê²°ê³¼ê°€ ë‚˜ì˜¬ ìˆ˜ ìˆìŠµë‹ˆë‹¤. ë”°ë¼ì„œ ëŸ¬ìŠ¤íŠ¸ì—ì„œëŠ” í•˜ë‚˜ì˜ ê°’ì— ëŒ€í•œ ì—¬ëŸ¬ ê°œì˜ ê°€ë³€ ë ˆí¼ëŸ°ìŠ¤ë¥¼ í—ˆìš©í•˜ì§€ ì•ŠìŠµë‹ˆë‹¤. 
```rust
fn main() {
    let mut x = String::from("Hello");
    let y = &mut x; // ì—¬ê¸°ë„ ê°€ë³€ ë ˆí¼ëŸ°ìŠ¤ í•˜ê³  
    let z = &mut x; // ì—¬ê¸°ë„ ê°€ë³€ ë ˆí¼ëŸ°ìŠ¤ í•˜ê³  

    println!("{} {}", y, z);
}

// ì‹¤í–‰ ê²°ê³¼

   Compiling rust_part v0.1.0 (/Users/code/temp/rust_part)
error[E0499]: cannot borrow `x` as mutable more than once at a time
 --> src/main.rs:4:13
  |
3 |     let y = &mut x;
  |             ------ first mutable borrow occurs here
4 |     let z = &mut x;
  |             ^^^^^^ second mutable borrow occurs here
5 |
6 |     println!("{} {}", y, z);
  |                       - first borrow later used here

```

í•˜ì§€ë§Œ ê°€ë³€ ë ˆí¼ëŸ°ìŠ¤ê°€ ì•„ë‹ˆë¼ ë‹¨ìˆœ ë ˆí¼ëŸ°ìŠ¤ëŠ” ì—¬ëŸ¬ê°œ ê°€ëŠ¥. 
```rust
fn main() {
    let x = String::from("Hello");
    let y = &x;
    let z = &x;

    println!("{} {}", y, z);
}

// ì‹¤í–‰ ê²°ê³¼
Hello Hello
```


## í´ë¡œì €ì™€ ì†Œìœ ê¶Œ
./function.md ì—ì„œ Rustì˜ í´ë¡œì €ì— ëŒ€í•´ì„œ ì§„ì§œ ê°„ë‹¨í•˜ê²Œë§Œ ì‚´í´ë³´ì•˜ëŠ”ë°, ì†Œìœ ê¶Œ ê°œë…ê³¼ í•©ì³ì„œ ì¢€ ë” ìì„¸íˆ ì•Œì•„ë³´ê³ ìí•¨. 

> ëŸ¬ìŠ¤íŠ¸ì—ë„ ëŒë‹¤ í•¨ìˆ˜ì™€ ë¹„ìŠ·í•œ ê°œë…ì´ ìˆëŠ”ë° ë°”ë¡œ í´ë¡œì €(Closure). 
> JSì˜ closure, ìµëª… í•¨ìˆ˜ ê°œë…ê³¼ ì°¨ì´ì ì€ ì—†ëŠ”ì§€ ì•Œì•„ë³´ê³  ì ê¸°. í´ë¡œì €ëŠ” íŒŒë¼ë¯¸í„°ë¥¼ `| | ì˜ ì‚¬ì´ì— ì„ ì–¸í•˜ê³ , ê·¸ ë’¤ì— í•¨ìˆ˜ì—ì„œ ë¦¬í„´í•˜ëŠ” ë¶€ë¶„ì„ ì‘ì„±`í•©ë‹ˆë‹¤.
```rust
fn main() {
    let my_func = |x| x + 1;
    println!("{}", my_func(3));
}

```
### í´ë¡œì €ì˜ ì—­í• 
1. í™˜ê²½ ìº¡ì³ (Environment capture)
1) í´ë¡œì €ê°€ ë³€ìˆ˜ë¥¼ ìì‹ ì˜ ìŠ¤ì½”í”„ ë‚´ë¶€ë¡œ ê°€ì ¸ê°€ëŠ” ë°©ë²•1 - ë¶ˆë³€ ì†Œìœ ê¶Œ ëŒ€ì—¬
í´ë¡œì €ëŠ” í´ë¡œì €ê°€ ì„ ì–¸ëœ ìŠ¤ì½”í”„ì— ìˆëŠ” ì§€ì—­ ë³€ìˆ˜ë¥¼ ìì‹ ì˜ í•¨ìˆ˜ ë‚´ë¶€ì—ì„œ ì‚¬ìš©í•  ìˆ˜ ìˆëŠ”ë°, ì´ë¥¼ `í™˜ê²½ ìº¡ì²˜(Environment capture)`ë¼ê³  ë¶€ë¦…ë‹ˆë‹¤.
```rust
fn main() {
    let multiplier = 5;

    let func = |x: i32| -> i32 { x * multiplier }; // í´ë¡œì € 
    // í´ë¡œì € ë‚´ì—ì„œë„ multiplier ì§€ì—­ ë³€ìˆ˜ê°€ ì‚¬ìš© ê°€ëŠ¥. 
    // ì–´ë–»ê²Œ ì‚¬ìš© ê°€ëŠ¥? í´ë¡œì €ëŠ” multiplierë¥¼ ë¶ˆë³€ ì†Œìœ ê¶Œ ëŒ€ì—¬ ë°©ë²•ìœ¼ë¡œ ìì‹ ì˜ ë‚´ë¶€ì—ì„œ ì‚¬ìš©í•œ ê²ƒì„. 

    for i in 1..=5 {
        println!("{}", func(i));
    }

    println!("{}", multiplier); // ğŸ‘
}

// ì‹¤í–‰ ê²°ê³¼
// 5
// 10
// 15
// 20
// 25
// 5
```

2) í´ë¡œì €ê°€ ë³€ìˆ˜ë¥¼ ìì‹ ì˜ ìŠ¤ì½”í”„ ë‚´ë¶€ë¡œ ê°€ì ¸ê°€ëŠ” ë°©ë²•2 - ê°€ë³€ ì†Œìœ ê¶Œ ëŒ€ì—¬
```rust
fn main() {
    let mut multiplier = 5; // ê°€ë³€ ë³€ìˆ˜ë¡œ ì„ ì–¸

    let mut func = |x: i32| -> i32 {
        multiplier += 1; // í´ë¡œì € ë‚´ë¶€ì—ì„œ multiplierì˜ ê°’ì„ ë³€ê²½
        x * multiplier
    };

    for i in 1..=5 {
        println!("{}", func(i));
    }

    println!("{}", multiplier); // í´ë¡œì € í˜¸ì¶œì´ ëë‚œ ë‹¤ìŒì—ë„ ì—¬ì „íˆ multiplierì— ì ‘ê·¼ì´ ê°€ëŠ¥
}

// 6
// 14
// 24
// 36
// 50
// 10

```

3) í´ë¡œì €ê°€ ë³€ìˆ˜ë¥¼ ìì‹ ì˜ ìŠ¤ì½”í”„ ë‚´ë¶€ë¡œ ê°€ì ¸ê°€ëŠ” ë°©ë²•2 - ì†Œìœ ê¶Œ ê°€ì ¸ê°€ê¸°

ìœ„ ë‘ ë°©ë²•ì€ 'ëŒ€ì—¬' ì˜€ë‹¤ë©´ ì´ê±´ ì•„ì— 'ì†Œìœ ê¶Œì„ ê°€ì ¸ê°€ëŠ” ê²ƒ'ì„. 
í´ë¡œì €ê°€ ê°™ì€ ìŠ¤ì½”í”„ì— ì„ ì–¸ëœ ì§€ì—­ ë³€ìˆ˜ì˜ ì†Œìœ ê¶Œì„ ê°€ì ¸ê°€ë„ë¡ í•˜ë ¤ë©´ í´ë¡œì €ì˜ íŒŒë¼ë¯¸í„°ë¥¼ ì„ ì–¸í•˜ëŠ” ì½”ë“œ ì•ì— `move` í‚¤ì›Œë“œë¥¼ ì‚¬ìš©í•˜ë©´ ë©ë‹ˆë‹¤.
```rust
fn factory(factor: i32) -> impl Fn(i32) -> i32 { // í´ë¡œì €ë¥¼ ë¦¬í„´í•˜ëŠ” í•¨ìˆ˜ factory
    |x| x * factor
}

fn main() {
    let multiplier = 5;
    let mult = factory(multiplier);
    for i in 1..=3 {
        println!("{}", mult(i));
    }
}

//í•˜ì§€ë§Œ ìœ„ ì½”ë“œë¥¼ ì»´íŒŒì¼í•˜ë©´, ì•„ë˜ì™€ ê°™ì€ ì—ëŸ¬ê°€ ë°œìƒí•©ë‹ˆë‹¤.

error[E0597]: `factor` does not live long enough
 --> src/main.rs:2:13
  |
2 |     |x| x * factor
  |     ---     ^^^^^^ borrowed value does not live long enough
  |     |
  |     value captured here
3 | }
  |  -
  |  |
  |  `factor` dropped here while still borrowed
  |  borrow later used here

For more information about this error, try `rustc --explain E0597`.
error: could not compile `notebook` due to previous error
```

factor ë³€ìˆ˜ê°€ í´ë¡œì € ì•ˆì— ìº¡ì²˜ë  ë•Œ, ì†Œìœ ê¶Œì´ factoryë¡œë¶€í„° í´ë¡œì €ë¡œ ëŒ€ì—¬ë©ë‹ˆë‹¤. í•˜ì§€ë§Œ factoryí•¨ìˆ˜ê°€ ì¢…ë£Œë˜ë©´ factor ë³€ìˆ˜ì˜ ê°’ì´ ì‚­ì œë˜ê¸° ë•Œë¬¸ì— ë¦¬í„´ëœ í´ë¡œì €ì—ì„œ ë” ì´ìƒ factor ë¥¼ ì‚¬ìš©í•  ìˆ˜ ì—†ëŠ” ë¬¸ì œê°€ ë°œìƒí•©ë‹ˆë‹¤. ì´ë¥¼ ë°©ì§€í•˜ê¸° ìœ„í•´ì„œëŠ” í´ë¡œì € ì•ˆìœ¼ë¡œ factorì˜ ì†Œìœ ê¶Œì„ ì´ë™ì‹œí‚¤ë©´ ë©ë‹ˆë‹¤. ì´ë•Œ ì‚¬ìš©ë˜ëŠ” í‚¤ì›Œë“œê°€ moveì…ë‹ˆë‹¤. moveëŠ” ìº¡ì²˜ëœ ë³€ìˆ˜ì˜ ì†Œìœ ê¶Œì„ í´ë¡œì € ì•ˆìœ¼ë¡œ ì´ë™ì‹œí‚µë‹ˆë‹¤.

```rust
fn factory(factor: i32) -> impl Fn(i32) -> i32 {
    move |x| x * factor
}

fn main() {
    let multiplier = 5;
    let mult = factory(multiplier);
    for i in 1..=3 {
        println!("{}", mult(i));
    }
}

// ì‹¤í–‰ ê²°ê³¼

// 5
// 10
// 15
```
í´ë¡œì €ì—ì„œ move ë¥¼ ê°€ì¥ ë§ì´ ì‚¬ìš©í•˜ëŠ” ê²½ìš°ëŠ” ë©€í‹°ìŠ¤ë ˆë“œ í˜¹ì€ ë¹„ë™ê¸° í”„ë¡œê·¸ë˜ë°ì„ ì‘ì„±í•  ë•Œì…ë‹ˆë‹¤.